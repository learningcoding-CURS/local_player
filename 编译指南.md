# 编译指南

## 方式一：使用 Android Studio（推荐）

1. 打开 Android Studio
2. 选择 **File → Open**，打开项目根目录
3. 等待 Gradle 同步完成
4. 执行清理和构建：
   - **Build → Clean Project**
   - **Build → Rebuild Project**
5. 生成 APK：
   - **Build → Build Bundle(s) / APK(s) → Build APK(s)**

生成的 APK 文件位于：
```
app/build/outputs/apk/debug/app-debug.apk
```

## 方式二：使用命令行

### 前置要求
- 确保已安装 Android SDK
- 确保 ANDROID_HOME 环境变量已配置

### Windows
在项目根目录打开命令提示符（CMD 或 PowerShell）：

```bash
# 如果没有 gradlew.bat，需要先生成
# 在 Android Studio 中打开项目会自动生成

# 清理项目
gradlew clean

# 构建调试版本
gradlew assembleDebug
```

### Linux/Mac
```bash
# 赋予执行权限
chmod +x gradlew

# 清理项目
./gradlew clean

# 构建调试版本
./gradlew assembleDebug
```

## 常见问题

### 1. 中文路径问题
如果项目路径包含中文字符，建议：
- 使用 Android Studio 进行构建
- 或将项目移到纯英文路径下

### 2. 清理构建缓存
如果遇到编译缓存问题：

**在 Android Studio 中：**
- **Build → Clean Project**
- **File → Invalidate Caches → Invalidate and Restart**

**命令行：**
```bash
gradlew clean
gradlew cleanBuildCache
```

### 3. 包名冲突
本项目使用的包名是 `com.localmedia.player`。如果遇到包名相关的错误，请确保：
- `app/build.gradle.kts` 中的 `namespace` 和 `applicationId` 都是 `com.localmedia.player`
- 没有旧的 `com.local.mediaplayer` 目录残留

### 4. 依赖下载问题
如果 Gradle 依赖下载缓慢：
- 可以配置国内镜像源（阿里云、腾讯云等）
- 或使用 VPN

## 输出文件位置

### Debug 版本
```
app/build/outputs/apk/debug/
├── app-debug.apk                    # 通用版本
├── app-arm64-v8a-debug.apk         # ARM64 架构
├── app-armeabi-v7a-debug.apk       # ARM32 架构
├── app-x86-debug.apk               # x86 架构
└── app-x86_64-debug.apk            # x86_64 架构
```

### Release 版本
```
app/build/outputs/apk/release/
└── app-release.apk
```

## 版本信息
- 最低支持：Android 8.0 (API 26)
- 目标版本：Android 14 (API 34)
- 编译 SDK：34

